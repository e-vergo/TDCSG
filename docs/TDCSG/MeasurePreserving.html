<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="icon" href=".././favicon.svg"></link><link rel="mask-icon" href=".././favicon.svg" color="#000000"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>TDCSG.MeasurePreserving</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="TDCSG.MeasurePreserving";</script><script type="module" src=".././jump-src.js"></script><script type="module" src=".././search.js"></script><script type="module" src=".././expand-nav.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">TDCSG</span>.<span class="name">MeasurePreserving</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init.html">Init</a></li><li><a href=".././TDCSG/Basic.html">TDCSG.Basic</a></li><li><a href=".././TDCSG/Composition.html">TDCSG.Composition</a></li><li><a href=".././TDCSG/Properties.html">TDCSG.Properties</a></li><li><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html">Mathlib.Dynamics.Ergodic.MeasurePreserving</a></li><li><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html">Mathlib.MeasureTheory.Measure.MeasureSpaceDef</a></li><li><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html">Mathlib.MeasureTheory.Constructions.BorelSpace.Basic</a></li><li><a href=".././Mathlib/MeasureTheory/Constructions/Polish/Basic.html">Mathlib.MeasureTheory.Constructions.Polish.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-TDCSG.MeasurePreserving" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.instCoeFunForall"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">instCoeFunForall</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toMeasurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">toMeasurePreserving</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">measurable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.apply_eq_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">apply_eq_toFun</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">ext_fields</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields_iff"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">ext_fields_iff</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.measure_preimage_piece"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_preimage_piece</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.toPiecewiseIsometry_of_measurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">toPiecewiseIsometry_of_measurePreserving</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.idMeasurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">idMeasurePreserving</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.compMP"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.compMP_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP_apply</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.compMP_assoc_fun"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP_assoc_fun</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterateMP"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterateMP_zero"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_zero</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterateMP_succ"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_succ</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterateMP_preserves_measure"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_preserves_measure</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.IsInvariant"><span class="name">PiecewiseIsometry</span>.<span class="name">IsInvariant</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.IsCompletelyInvariant"><span class="name">PiecewiseIsometry</span>.<span class="name">IsCompletelyInvariant</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.measure_eq_of_invariant"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_eq_of_invariant</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.measure_preimage_eq_of_completely_invariant"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_preimage_eq_of_completely_invariant</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.borel_measurable_of_continuous_pieces"><span class="name">PiecewiseIsometry</span>.<span class="name">borel_measurable_of_continuous_pieces</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Measure-Preserving-Piecewise-Isometries">Measure-Preserving Piecewise Isometries <a class="hover-link" href="#Measure-Preserving-Piecewise-Isometries">#</a></h1><p>This file develops the theory of measure-preserving piecewise isometries, which are piecewise
isometries that additionally preserve a given measure. This is the second tier in the
three-tiered structure pattern.</p><h2 class="markdown-heading" id="Main-definitions">Main definitions <a class="hover-link" href="#Main-definitions">#</a></h2><ul>
<li><code><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> α μ</code>: A piecewise isometry on <code>α</code> that preserves the
measure <code>μ</code></li>
<li><code><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toMeasurePreserving">MeasurePreservingPiecewiseIsometry.toMeasurePreserving</a></code>: Extract the measure-preserving
property as a <code><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html#MeasureTheory.MeasurePreserving">MeasureTheory.MeasurePreserving</a></code> instance</li>
</ul><h2 class="markdown-heading" id="Main-results">Main results <a class="hover-link" href="#Main-results">#</a></h2><ul>
<li><code>measurePreserving_of_null_discontinuities</code>: A piecewise isometry with measure-zero
discontinuities is measure-preserving if measurable</li>
<li><code><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.measure_preimage_piece">measure_preimage_piece</a></code>: The measure of a preimage can be computed piece-by-piece</li>
<li><code>comp_preserves_measure</code>: Composition of measure-preserving piecewise isometries preserves
measure</li>
<li><code>iterate_preserves_measure</code>: Iteration of a measure-preserving piecewise isometry preserves
measure</li>
</ul><h2 class="markdown-heading" id="Implementation-notes">Implementation notes <a class="hover-link" href="#Implementation-notes">#</a></h2><p>We use the <code>extends</code> mechanism to inherit from <code><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a></code> while adding measure
preservation conditions. This follows the pattern used in mathlib's ergodic theory module.</p></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry"><div class="structure"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L51-L61">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_extends">extends</span> <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span><span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Type</a> u</div></div><p>A measure-preserving piecewise isometry.</p><p>This structure extends <code><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a></code> by requiring that the underlying function is
measurable and preserves a specified measure <code>μ</code>.</p><ul class="structure_fields" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk"><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition_measurable">partition_measurable</a><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
 : <span class="fn"><span class="fn">s</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span> → <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition_countable">partition_countable</a> : <span class="fn"><span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition_cover">partition_cover</a> : <a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition_disjoint">partition_disjoint</a> : <span class="fn"><span class="fn"><span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>.<a href=".././Mathlib/Data/Set/Pairwise/Basic.html#Set.PairwiseDisjoint">PairwiseDisjoint</a></span> <a href=".././Init/Prelude.html#id">_root_.id</a></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition_nonempty">partition_nonempty</a><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
 : <span class="fn"><span class="fn">s</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span> → <span class="fn"><span class="fn">s</span>.<a href=".././Mathlib/Data/Set/Defs.html#Set.Nonempty">Nonempty</a></span></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span></div></li><li class="structure_field inherited_field"><div class="structure_field_info"><a href=".././TDCSG/Basic.html#PiecewiseIsometry.isometry_on_pieces">isometry_on_pieces</a><span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
 : <span class="fn"><span class="fn">s</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span> → <span class="fn">∀ <span class="fn">x</span> ∈ <span class="fn">s</span>, <span class="fn">∀ <span class="fn">y</span> ∈ <span class="fn">s</span>, <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">(<span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span>)</span> <span class="fn">(<span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">y</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">x</span> <span class="fn">y</span></span></span></span></span></div></li><li id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.measurable_toFun" class="structure_field"><div class="structure_field_info">measurable_toFun : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span></div><div class="structure_field_doc"><p>The underlying function is measurable</p></div></li><li id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.measure_preserving" class="structure_field"><div class="structure_field_info">measure_preserving : <span class="fn"><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html#MeasureTheory.MeasurePreserving">MeasureTheory.MeasurePreserving</a> <span class="fn"><span class="fn">self</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">μ</span> <span class="fn">μ</span></span></div><div class="structure_field_doc"><p>The function preserves the measure μ</p></div></li></ul><details id="instances-for-list-PiecewiseIsometry.MeasurePreservingPiecewiseIsometry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.instCoeFunForall"><div class="instance"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L67-L69">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.instCoeFunForall"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">instCoeFunForall</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Coe.html#CoeFun">CoeFun</a> <span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span>)</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>) =&gt; <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span></span></span></div></div><p>Allow function application notation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.instCoeFunForall">PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.instCoeFunForall</a> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././Init/Coe.html#CoeFun.mk">{</a> <span class="fn">coe</span> := <span class="fn">fun (<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">PiecewiseIsometry.MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>) =&gt; <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span> <a href=".././Init/Coe.html#CoeFun.mk">}</a></li></ul></details></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toMeasurePreserving"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L71-L74">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toMeasurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">toMeasurePreserving</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html#MeasureTheory.MeasurePreserving">MeasureTheory.MeasurePreserving</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">μ</span> <span class="fn">μ</span></span></div></div><p>Extract the measure-preserving property.</p></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.measurable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L76-L79">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">measurable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span></div></div><p>The function is measurable.</p></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.apply_eq_toFun"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L81-L84">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.apply_eq_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">apply_eq_toFun</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span></div></div><p>Function application.</p></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L86-L100">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">ext_fields</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">h_pi</span> : <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toPiecewiseIsometry">toPiecewiseIsometry</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toPiecewiseIsometry">toPiecewiseIsometry</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">f</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">g</span></div></div><p>Extensionality for MeasurePreservingPiecewiseIsometry: two are equal if all their structure
fields are equal. This is a helper lemma for proving equality of two instances when we can show
that all fields (partition, functions, proofs) coincide.</p><p>Note: We do NOT claim that function equality alone implies structure equality, as the partition
structures might differ. This lemma requires actual field-by-field equality.</p></div></div><div class="decl" id="PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields_iff"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L92-L92">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.ext_fields_iff"><span class="name">PiecewiseIsometry</span>.<span class="name">MeasurePreservingPiecewiseIsometry</span>.<span class="name">ext_fields_iff</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">f</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">g</span> <a href=".././Init/Core.html#Iff">↔</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toPiecewiseIsometry">toPiecewiseIsometry</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toPiecewiseIsometry">toPiecewiseIsometry</a></span></div></div></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Removed-Theorems">Removed Theorems <a class="hover-link" href="#Removed-Theorems">#</a></h3><p><strong>REMOVED: <code>measurePreserving_of_null_discontinuities</code></strong></p><p>The original theorem claimed that a surjective piecewise isometry with null discontinuities
preserves arbitrary measure μ. This is <strong>mathematically false</strong>.</p><p>Counter-example: Let α = ℝ, μ = Dirac measure at 0, f(x) = x+1. Then f is measurable, surjective,
a piecewise isometry with null discontinuities, but μ(f⁻¹({1})) = 1 ≠ 0 = μ({1}).</p><p>The theorem would be true for Hausdorff measure of dimension d (using Mathlib's
<code>Isometry.hausdorffMeasure_image</code>), but with μ arbitrary, it's false.</p><p>A correct version would require specializing to Hausdorff or Lebesgue measure.</p><p><strong>REMOVED: <code>measurePreserving_of_pieces_preserved</code></strong></p><p>This theorem claimed that if μ(f(p)) = μ(p) for each partition piece p, and f is surjective,
then f preserves μ globally. This cannot be proved with the given hypotheses.</p><p>The fundamental issue: even knowing μ(f(p)) = μ(p) for each piece, we cannot deduce that f
preserves the measure of arbitrary measurable subsets without additional structure on μ or
stronger hypotheses about f's action on measurable sets within each piece.</p><p>For Mathlib submission, these should be specialized to specific measure types where isometry
preservation is already established.</p></div><div class="decl" id="PiecewiseIsometry.measure_preimage_piece"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L136-L166">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.measure_preimage_piece"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_preimage_piece</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_meas</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">μ</span> (<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">s</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Mathlib/Topology/Algebra/InfiniteSum/Defs.html#tsum">∑'</a> (<span class="fn">t</span> : <span class="fn">↑<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span></span>)<a href=".././Mathlib/Topology/Algebra/InfiniteSum/Defs.html#tsum">,</a> <span class="fn"><span class="fn">μ</span> (<span class="fn">↑<span class="fn">t</span></span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">s</span>)</span></span></div></div><p>The measure of a preimage of a measurable set can be computed piece-by-piece.</p></div></div><div class="decl" id="PiecewiseIsometry.toPiecewiseIsometry_of_measurePreserving"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L174-L182">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.toPiecewiseIsometry_of_measurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">toPiecewiseIsometry_of_measurePreserving</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_meas</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_mp</span> : <span class="fn"><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html#MeasureTheory.MeasurePreserving">MeasureTheory.MeasurePreserving</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">μ</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span></div></div><p>Construct a measure-preserving piecewise isometry from a piecewise isometry with
additional properties.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.toPiecewiseIsometry_of_measurePreserving">toPiecewiseIsometry_of_measurePreserving</a></span> <span class="fn">h_meas</span> <span class="fn">h_mp</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">{</a> <span class="fn">toPiecewiseIsometry</span> := <span class="fn">f</span>, <span class="fn">measurable_toFun</span> := <span class="fn">h_meas</span>, <span class="fn">measure_preserving</span> := <span class="fn">h_mp</span> <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">}</a></li></ul></details><details id="instances-for-list-PiecewiseIsometry.toPiecewiseIsometry_of_measurePreserving" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.idMeasurePreserving"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L184-L188">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.idMeasurePreserving"><span class="name">PiecewiseIsometry</span>.<span class="name">idMeasurePreserving</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span></div></div><p>The identity as a measure-preserving piecewise isometry.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.idMeasurePreserving">PiecewiseIsometry.idMeasurePreserving</a> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">{</a> <span class="fn">toPiecewiseIsometry</span> := <a href=".././TDCSG/Properties.html#PiecewiseIsometry.id">PiecewiseIsometry.id</a>, <span class="fn">measurable_toFun</span> := <span class="fn">⋯</span>, <span class="fn">measure_preserving</span> := <span class="fn">⋯</span> <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">}</a></li></ul></details><details id="instances-for-list-PiecewiseIsometry.idMeasurePreserving" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.compMP"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L196-L201">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span></div></div><p>Composition of measure-preserving piecewise isometries preserves measure.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">PiecewiseIsometry.compMP</a> <span class="fn">f</span> <span class="fn">g</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">{</a> <span class="fn">toPiecewiseIsometry</span> := <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.toPiecewiseIsometry">toPiecewiseIsometry</a></span></span>, <span class="fn">measurable_toFun</span> := <span class="fn">⋯</span>, <span class="fn">measure_preserving</span> := <span class="fn">⋯</span> <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry.mk">}</a></li></ul></details><details id="instances-for-list-PiecewiseIsometry.compMP" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.compMP_apply"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L203-L206">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP_apply</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">f</span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">(<span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span>)</span></span></div></div><p>Function application for composition.</p></div></div><div class="decl" id="PiecewiseIsometry.compMP_assoc_fun"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L208-L222">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP_assoc_fun"><span class="name">PiecewiseIsometry</span>.<span class="name">compMP_assoc_fun</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g </span><span class="fn">h</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">f</span> <span class="fn">g</span>)</span> <span class="fn">h</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">f</span> <span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">g</span> <span class="fn">h</span>)</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span></div></div><p>Composition is associative up to functional equality.</p><p><strong>NOTE</strong>: Due to the current structure representation (which includes partition information),
the two sides <code><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> (compMP f g) h</code> and <code><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> f (compMP g h)</code> have different partition
refinements and thus are not structurally equal. However, they represent the same function,
which is what matters for applications.</p><p>This lemma proves functional associativity. For structural equality, a quotient-based
representation would be required.</p></div></div><div class="decl" id="PiecewiseIsometry.iterateMP"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L231-L234">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Nat">ℕ</a> → <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span></span></div></div><p>The nth iterate of a measure-preserving piecewise isometry.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">PiecewiseIsometry.iterateMP</a> <span class="fn">f</span> <span class="fn">0</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.idMeasurePreserving">PiecewiseIsometry.idMeasurePreserving</a></li><li class="equation"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">PiecewiseIsometry.iterateMP</a> <span class="fn">f</span> <span class="fn"><span class="fn">n</span>.<a href=".././Init/Prelude.html#Nat.succ">succ</a></span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">PiecewiseIsometry.compMP</a> <span class="fn">f</span> <span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">PiecewiseIsometry.iterateMP</a> <span class="fn">f</span> <span class="fn">n</span>)</span></span></li></ul></details><details id="instances-for-list-PiecewiseIsometry.iterateMP" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.iterateMP_zero"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L236-L239">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP_zero"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_zero</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">iterateMP</a> <span class="fn">f</span> <span class="fn">0</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.idMeasurePreserving">idMeasurePreserving</a></div></div><p>Iterate at zero is identity.</p></div></div><div class="decl" id="PiecewiseIsometry.iterateMP_succ"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L241-L243">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP_succ"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_succ</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">iterateMP</a> <span class="fn">f</span> (<span class="fn">n</span> <a href=".././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.compMP">compMP</a> <span class="fn">f</span> <span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">iterateMP</a> <span class="fn">f</span> <span class="fn">n</span>)</span></span></div></div><p>Iterate at successor.</p></div></div><div class="decl" id="PiecewiseIsometry.iterateMP_preserves_measure"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L245-L248">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP_preserves_measure"><span class="name">PiecewiseIsometry</span>.<span class="name">iterateMP_preserves_measure</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#OpensMeasurableSpace">OpensMeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Dynamics/Ergodic/MeasurePreserving.html#MeasureTheory.MeasurePreserving">MeasureTheory.MeasurePreserving</a> <span class="fn"><span class="fn">(<a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.iterateMP">iterateMP</a> <span class="fn">f</span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">μ</span> <span class="fn">μ</span></span></div></div><p>Each iterate preserves measure.</p></div></div><div class="decl" id="PiecewiseIsometry.IsInvariant"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L256-L258">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsInvariant"><span class="name">PiecewiseIsometry</span>.<span class="name">IsInvariant</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Prop</a></div></div><p>A set is forward-invariant if it is mapped into itself.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsInvariant">PiecewiseIsometry.IsInvariant</a> <span class="fn">f</span> <span class="fn">s</span></span> <a href=".././Init/Prelude.html#Eq">=</a> (<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s</span> <a href=".././Init/Core.html#HasSubset.Subset">⊆</a> <span class="fn">s</span>)</li></ul></details><details id="instances-for-list-PiecewiseIsometry.IsInvariant" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.IsCompletelyInvariant"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L260-L262">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsCompletelyInvariant"><span class="name">PiecewiseIsometry</span>.<span class="name">IsCompletelyInvariant</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././foundational_types.html">Prop</a></div></div><p>A set is completely invariant if it is mapped onto itself bijectively.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsCompletelyInvariant">PiecewiseIsometry.IsCompletelyInvariant</a> <span class="fn">f</span> <span class="fn">s</span></span> <a href=".././Init/Prelude.html#Eq">=</a> (<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">s</span>)</li></ul></details><details id="instances-for-list-PiecewiseIsometry.IsCompletelyInvariant" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.measure_eq_of_invariant"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L264-L296">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.measure_eq_of_invariant"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_eq_of_invariant</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/CountablyGenerated.html#MeasurableSpace.CountablySeparated">MeasurableSpace.CountablySeparated</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/Polish/Basic.html#StandardBorelSpace">StandardBorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">_h_inv</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsInvariant">IsInvariant</a> <span class="fn">f</span> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_bij</span> : <span class="fn"><a href=".././Mathlib/Logic/Function/Defs.html#Function.Bijective">Function.Bijective</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">μ</span> (<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Defs.html#Set.image">''</a> <span class="fn">s</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">μ</span> <span class="fn">s</span></span></div></div><p>The measure of an invariant set equals the measure of its image.</p><p>This theorem requires additional structure beyond what's in the basic PiecewiseIsometry definition.
We need that images of measurable sets are measurable, which for standard Borel spaces follows
from the Lusin-Souslin theorem (Mathlib's <code><a href=".././Mathlib/MeasureTheory/Constructions/Polish/Basic.html#MeasurableSet.image_of_measurable_injOn">MeasurableSet.image_of_measurable_injOn</a></code>).</p></div></div><div class="decl" id="PiecewiseIsometry.measure_preimage_eq_of_completely_invariant"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L298-L304">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.measure_preimage_eq_of_completely_invariant"><span class="name">PiecewiseIsometry</span>.<span class="name">measure_preimage_eq_of_completely_invariant</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">μ</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.Measure">MeasureTheory.Measure</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.MeasurePreservingPiecewiseIsometry">MeasurePreservingPiecewiseIsometry</a> <span class="fn">α</span> <span class="fn">μ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">_h_inv</span> : <span class="fn"><a href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.IsCompletelyInvariant">IsCompletelyInvariant</a> <span class="fn">f</span> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">μ</span> (<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">s</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">μ</span> <span class="fn">s</span></span></div></div><p>A completely invariant measurable set has the same measure as its preimage.</p></div></div><div class="decl" id="PiecewiseIsometry.borel_measurable_of_continuous_pieces"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/MeasurePreserving.lean#L312-L359">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/MeasurePreserving.html#PiecewiseIsometry.borel_measurable_of_continuous_pieces"><span class="name">PiecewiseIsometry</span>.<span class="name">borel_measurable_of_continuous_pieces</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/Defs/Basic.html#TopologicalSpace">TopologicalSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">_h_open</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>, <span class="fn"><a href=".././Mathlib/Topology/Defs/Basic.html#IsOpen">IsOpen</a> <span class="fn">(<a href=".././Mathlib/Topology/Defs/Basic.html#interior">interior</a> <span class="fn">s</span>)</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_cont</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>, <span class="fn"><a href=".././Mathlib/Topology/Defs/Filter.html#ContinuousOn">ContinuousOn</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">s</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span></div></div><p>A piecewise isometry with continuous pieces is measurable with respect to Borel sigma
algebra.</p><p><strong>NEEDS MATHLIB</strong>: This is a general result about piecewise continuous functions on countable
partitions. The proof would use:</p><ol>
<li>Measurability of continuous functions</li>
<li>Countable unions preserve measurability</li>
<li>The fact that being continuous on each piece of a partition makes the function measurable</li>
</ol><p>In mathlib, there should be lemmas like &quot;if f is continuous on each set in a countable measurable
partition, then f is measurable&quot;. If not, this would be a good addition to mathlib's
MeasureTheory.Constructions.BorelSpace.Basic.</p><p>The proof outline:</p><ul>
<li>For any open set U, we want to show f⁻¹(U) is measurable</li>
<li>f⁻¹(U) = ⋃_{s ∈ partition} (s ∩ f⁻¹(U))</li>
<li>Each s ∩ f⁻¹(U) is measurable because f is continuous on s and s is measurable</li>
<li>Countable union of measurable sets is measurable</li>
</ul></div></div></main>
<nav class="nav"><iframe src=".././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>