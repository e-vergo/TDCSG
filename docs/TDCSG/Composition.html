<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="icon" href=".././favicon.svg"></link><link rel="mask-icon" href=".././favicon.svg" color="#000000"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>TDCSG.Composition</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="TDCSG.Composition";</script><script type="module" src=".././jump-src.js"></script><script type="module" src=".././search.js"></script><script type="module" src=".././expand-nav.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">TDCSG</span>.<span class="name">Composition</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init.html">Init</a></li><li><a href=".././TDCSG/Basic.html">TDCSG.Basic</a></li><li><a href=".././TDCSG/Properties.html">TDCSG.Properties</a></li><li><a href=".././Mathlib/Topology/MetricSpace/Isometry.html">Mathlib.Topology.MetricSpace.Isometry</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-TDCSG.Composition" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartitionPreimage"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartition"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartition_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_measurable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartition_cover"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_cover</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartition_countable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_countable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartitionPreimage_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_measurable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartitionPreimage_cover"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_cover</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartitionPreimage_countable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_countable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.refinedPartitionPreimage_disjoint"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_disjoint</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.isometry_on_continuous"><span class="name">PiecewiseIsometry</span>.<span class="name">isometry_on_continuous</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.continuousOn_measurableSet_preimage"><span class="name">PiecewiseIsometry</span>.<span class="name">continuousOn_measurableSet_preimage</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.piecewiseIsometry_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">piecewiseIsometry_measurable</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.ext_partition_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">ext_partition_toFun</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp"><span class="name">PiecewiseIsometry</span>.<span class="name">comp</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_apply</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp_assoc"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_assoc</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp_id_left"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_id_left</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp_id_right"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_id_right</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_succ"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_succ</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_zero_eq"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_zero_eq</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_one"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_one</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_apply</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_add"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_add</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_isometry_on_pieces"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_isometry_on_pieces</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_toFun</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.comp_dist_eq"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_dist_eq</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.discontinuitySet_comp_subset"><span class="name">PiecewiseIsometry</span>.<span class="name">discontinuitySet_comp_subset</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.discontinuitySet_iterate"><span class="name">PiecewiseIsometry</span>.<span class="name">discontinuitySet_iterate</span></a></div><div class="nav_link"><a class="break_within" href="#PiecewiseIsometry.iterate_finite_discontinuities"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_finite_discontinuities</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Composition-and-Iteration-of-Piecewise-Isometries">Composition and Iteration of Piecewise Isometries <a class="hover-link" href="#Composition-and-Iteration-of-Piecewise-Isometries">#</a></h1><p>This file defines composition and iteration for piecewise isometries. The key challenge in
composition is that the resulting partition must be a refinement of both input partitions.</p><h2 class="markdown-heading" id="Main-definitions">Main definitions <a class="hover-link" href="#Main-definitions">#</a></h2><ul>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">PiecewiseIsometry.comp</a></code>: Composition of two piecewise isometries</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">PiecewiseIsometry.iterate</a></code>: Iteration of a piecewise isometry</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition">PiecewiseIsometry.refinedPartition</a></code>: The common refinement of two partitions</li>
</ul><h2 class="markdown-heading" id="Main-results">Main results <a class="hover-link" href="#Main-results">#</a></h2><ul>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_assoc">comp_assoc</a></code>: Composition is associative</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_id_left">comp_id_left</a></code>: Left identity for composition</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_id_right">comp_id_right</a></code>: Right identity for composition</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_succ">iterate_succ</a></code>: Characterization of iteration</li>
<li><code>iterate_isometry</code>: Each iterate is isometric on pieces</li>
<li><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_apply">comp_apply</a></code>: Function application distributes over composition</li>
</ul><h2 class="markdown-heading" id="Notation">Notation <a class="hover-link" href="#Notation">#</a></h2><ul>
<li><code>f.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a> g</code> or <code>f ∘ g</code>: Composition of piecewise isometries</li>
<li><code>f^[n]</code>: The nth iterate of f</li>
</ul></div><div class="decl" id="PiecewiseIsometry.refinedPartitionPreimage"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L46-L52">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span></div></div><p>The refined partition obtained by intersecting pieces from two partitions with preimage.</p><p>Given partitions p (for g) and q (for f), and function g, the preimage-based refinement consists
of all nonempty intersections s ∩ g⁻¹(t) where s ∈ p and t ∈ q.
This ensures g maps each refined piece entirely into a single piece of f's partition.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">PiecewiseIsometry.refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <a href=".././Mathlib/Data/Set/Defs.html#setOf">{</a><span class="fn">u</span> <a href=".././Mathlib/Data/Set/Defs.html#setOf">:</a> <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span> <a href=".././Mathlib/Data/Set/Defs.html#setOf">|</a> <span class="fn">∃ <span class="fn">s</span> ∈ <span class="fn">p</span>, <span class="fn">∃ <span class="fn">t</span> ∈ <span class="fn">q</span>, <span class="fn">u</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">s</span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn">g</span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">t</span> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn">(<span class="fn">s</span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn">g</span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">t</span>).<a href=".././Mathlib/Data/Set/Defs.html#Set.Nonempty">Nonempty</a></span></span></span><a href=".././Mathlib/Data/Set/Defs.html#setOf">}</a></li></ul></details><details id="instances-for-list-PiecewiseIsometry.refinedPartitionPreimage" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.refinedPartition"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L54-L56">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span></div></div><p>The naive refined partition (kept for potential use in other contexts).</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition">PiecewiseIsometry.refinedPartition</a> <span class="fn">p</span> <span class="fn">q</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#setOf">{</a><span class="fn">u</span> <a href=".././Mathlib/Data/Set/Defs.html#setOf">:</a> <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span> <a href=".././Mathlib/Data/Set/Defs.html#setOf">|</a> <span class="fn">∃ <span class="fn">s</span> ∈ <span class="fn">p</span>, <span class="fn">∃ <span class="fn">t</span> ∈ <span class="fn">q</span>, <span class="fn">u</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">s</span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn">t</span> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn">(<span class="fn">s</span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn">t</span>).<a href=".././Mathlib/Data/Set/Defs.html#Set.Nonempty">Nonempty</a></span></span></span><a href=".././Mathlib/Data/Set/Defs.html#setOf">}</a></li></ul></details><details id="instances-for-list-PiecewiseIsometry.refinedPartition" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.refinedPartition_measurable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L58-L64">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_measurable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn">p</span>, <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <span class="fn">∀ <span class="fn">t</span> ∈ <span class="fn">q</span>, <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">t</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">u</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">u</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition">refinedPartition</a> <span class="fn">p</span> <span class="fn">q</span></span> → <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">u</span></span></span></div></div><p>Elements of the refined partition are measurable if both original partitions are measurable.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartition_cover"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L66-L82">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition_cover"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_cover</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn">p</span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn">q</span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition">refinedPartition</a> <span class="fn">p</span> <span class="fn">q</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a></div></div><p>The refined partition covers the same space as the original partitions.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartition_countable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L85-L93">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition_countable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartition_countable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <span class="fn"><span class="fn">p</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <span class="fn"><span class="fn">q</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartition">refinedPartition</a> <span class="fn">p</span> <span class="fn">q</span>)</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span></div></div><p>The refined partition is countable if both original partitions are countable.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartitionPreimage_measurable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L95-L103">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_measurable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn">p</span>, <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <span class="fn">∀ <span class="fn">t</span> ∈ <span class="fn">q</span>, <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">t</span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hg</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn">g</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">u</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">u</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span></span> → <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">u</span></span></span></div></div><p>Elements of the preimage-based refined partition are measurable.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartitionPreimage_cover"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L105-L119">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage_cover"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_cover</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn">p</span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn">q</span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././Mathlib/Order/SetNotation.html#Set.sUnion">⋃₀</a> <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Mathlib/Data/Set/Defs.html#Set.univ">Set.univ</a></div></div><p>The preimage-based refined partition covers the space.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartitionPreimage_countable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L122-L129">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage_countable"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_countable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <span class="fn"><span class="fn">p</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <span class="fn"><span class="fn">q</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span>)</span>.<a href=".././Mathlib/Data/Set/Countable.html#Set.Countable">Countable</a></span></div></div><p>The preimage-based refined partition is countable.</p></div></div><div class="decl" id="PiecewiseIsometry.refinedPartitionPreimage_disjoint"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L131-L150">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage_disjoint"><span class="name">PiecewiseIsometry</span>.<span class="name">refinedPartitionPreimage_disjoint</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">p </span><span class="fn">q</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">(<a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">g</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hp</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn">p</span>, <span class="fn">∀ <span class="fn">t</span> ∈ <span class="fn">p</span>, <span class="fn"><span class="fn">s</span> <a href=".././Init/Core.html#Ne">≠</a> <span class="fn">t</span> → <span class="fn"><a href=".././Mathlib/Order/Disjoint.html#Disjoint">Disjoint</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hq</span> : <span class="fn">∀ <span class="fn">s</span> ∈ <span class="fn">q</span>, <span class="fn">∀ <span class="fn">t</span> ∈ <span class="fn">q</span>, <span class="fn"><span class="fn">s</span> <a href=".././Init/Core.html#Ne">≠</a> <span class="fn">t</span> → <span class="fn"><a href=".././Mathlib/Order/Disjoint.html#Disjoint">Disjoint</a> <span class="fn">s</span> <span class="fn">t</span></span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">u</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">u</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span></span> → <span class="fn">∀ <span class="fn">v</span> ∈ <span class="fn"><a href=".././TDCSG/Composition.html#PiecewiseIsometry.refinedPartitionPreimage">refinedPartitionPreimage</a> <span class="fn">p</span> <span class="fn">q</span> <span class="fn">g</span></span>, <span class="fn"><span class="fn">u</span> <a href=".././Init/Core.html#Ne">≠</a> <span class="fn">v</span> → <span class="fn"><a href=".././Mathlib/Order/Disjoint.html#Disjoint">Disjoint</a> <span class="fn">u</span> <span class="fn">v</span></span></span></span></span></div></div><p>The preimage-based refined partition is pairwise disjoint.</p></div></div><div class="decl" id="PiecewiseIsometry.isometry_on_continuous"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L157-L167">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.isometry_on_continuous"><span class="name">PiecewiseIsometry</span>.<span class="name">isometry_on_continuous</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">h_iso</span> : <span class="fn">∀ <span class="fn">x</span> ∈ <span class="fn">s</span>, <span class="fn">∀ <span class="fn">y</span> ∈ <span class="fn">s</span>, <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">(<span class="fn">f</span> <span class="fn">x</span>)</span> <span class="fn">(<span class="fn">f</span> <span class="fn">y</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">x</span> <span class="fn">y</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Topology/Defs/Filter.html#ContinuousOn">ContinuousOn</a> <span class="fn">f</span> <span class="fn">s</span></span></div></div><p>Helper lemma: isometry on a set implies continuity on that set.</p></div></div><div class="decl" id="PiecewiseIsometry.continuousOn_measurableSet_preimage"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L169-L196">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.continuousOn_measurableSet_preimage"><span class="name">PiecewiseIsometry</span>.<span class="name">continuousOn_measurableSet_preimage</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f</span> : <span class="fn"><span class="fn">α</span> → <span class="fn">α</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">s </span><span class="fn">U</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hf</span> : <span class="fn"><a href=".././Mathlib/Topology/Defs/Filter.html#ContinuousOn">ContinuousOn</a> <span class="fn">f</span> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hU</span> : <span class="fn"><a href=".././Mathlib/Topology/Defs/Basic.html#IsOpen">IsOpen</a> <span class="fn">U</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSet">MeasurableSet</a> (<span class="fn">f</span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn">U</span> <a href=".././Init/Core.html#Inter.inter">∩</a> <span class="fn">s</span>)</span></div></div><p>Key lemma: continuous on a measurable set implies measurable preimage restricted to that set.</p><p>This uses the fact that the restriction to a measurable subtype is a measurable embedding.</p></div></div><div class="decl" id="PiecewiseIsometry.piecewiseIsometry_measurable"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L198-L232">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.piecewiseIsometry_measurable"><span class="name">PiecewiseIsometry</span>.<span class="name">piecewiseIsometry_measurable</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#Measurable">Measurable</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span></div></div><p>A piecewise isometry is measurable under BorelSpace.</p><p>PROOF STRATEGY:</p><ul>
<li>Decompose f⁻¹(U) as the union over partition pieces: f⁻¹(U) = ⋃_{s ∈ partition} (f⁻¹(U) ∩ s)</li>
<li>On each piece s, f is an isometry, hence continuous on s</li>
<li>Use continuousOn_measurableSet_preimage to show f⁻¹(U) ∩ s is measurable</li>
<li>Apply countable union to conclude f⁻¹(U) is measurable</li>
<li>Use measurable_of_isOpen to conclude f is measurable</li>
</ul><p>TECHNICAL NOTE: This requires BorelSpace α (not just OpensMeasurableSpace α) to ensure
that continuous functions on subtypes are measurable.</p></div></div><div class="decl" id="PiecewiseIsometry.ext_partition_toFun"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L238-L252">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.ext_partition_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">ext_partition_toFun</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">h_partition</span> : <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h_toFun</span> : <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">f</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">g</span></div></div><p>Extensionality lemma for PiecewiseIsometry based on partition and function equality.</p><p>If two piecewise isometries have equal partitions and equal underlying functions,
then they are equal as structures. This is provable because all other fields
(partition_measurable, partition_countable, etc.) are proofs, which are unique
by proof irrelevance once the partition is fixed.</p></div></div><div class="decl" id="PiecewiseIsometry.comp"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L258-L295">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp"><span class="name">PiecewiseIsometry</span>.<span class="name">comp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span></div></div><p>Composition of two piecewise isometries.</p><p>The composition <code>f.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a> g</code> applies <code>g</code> first, then <code>f</code>. The resulting partition uses
preimage-based refinement to ensure g maps each refined piece into a single piece of f's partition.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-PiecewiseIsometry.comp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.comp_apply"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L297-L300">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_apply</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">(<span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span>)</span></span></div></div><p>Function application for composition.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Note-on-Extensionality">Note on Extensionality <a class="hover-link" href="#Note-on-Extensionality">#</a></h3><p>This structure does NOT have function extensionality in the usual sense.
Two PiecewiseIsometry values are equal iff ALL fields match, including the partition.
Having the same underlying function is NOT sufficient for structural equality.</p><p>Example: The identity function can be represented with partition {univ} or with
any other partition where it's isometric on each piece.</p><p>For reasoning about functional equality without structural equality, use:</p><ul>
<li>Function.funext_iff for the underlying functions</li>
<li>Or define a separate equivalence relation / setoid</li>
</ul><p>The @[ext] attribute is deliberately NOT used here because it would claim an
unprovable theorem. Lean's default structural equality is the correct notion.</p></div><div class="decl" id="PiecewiseIsometry.comp_assoc"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L319-L397">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_assoc"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_assoc</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g </span><span class="fn">h</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">h</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">(<span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">h</span>)</span></span></div></div><p>Composition is associative.</p></div></div><div class="decl" id="PiecewiseIsometry.comp_id_left"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L399-L432">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_id_left"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_id_left</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././TDCSG/Properties.html#PiecewiseIsometry.id">id</a>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">f</span></div></div><p>Left identity for composition.</p></div></div><div class="decl" id="PiecewiseIsometry.comp_id_right"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L434-L466">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_id_right"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_id_right</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <a href=".././TDCSG/Properties.html#PiecewiseIsometry.id">id</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">f</span></div></div><p>Right identity for composition.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate"><div class="def"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L472-L477">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Nat">ℕ</a> → <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span></span></div></div><p>The nth iterate of a piecewise isometry.</p><p><code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a> f n</code> applies <code>f</code> a total of <code>n</code> times. By convention, <code><a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a> f 0</code> is the identity.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">0</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././TDCSG/Properties.html#PiecewiseIsometry.id">PiecewiseIsometry.id</a></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn"><span class="fn">n</span>.<a href=".././Init/Prelude.html#Nat.succ">succ</a></span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span></span></li></ul></details><details id="instances-for-list-PiecewiseIsometry.iterate" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="PiecewiseIsometry.iterate_succ"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L479-L481">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_succ"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_succ</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> (<span class="fn">n</span> <a href=".././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span></span></div></div><p>Characterization of iterate at successor.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_zero_eq"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L483-L486">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_zero_eq"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_zero_eq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">0</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././TDCSG/Properties.html#PiecewiseIsometry.id">id</a></div></div><p>Iterate at zero is identity.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_one"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L488-L492">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_one"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_one</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">1</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">f</span></div></div><p>Iterate at one is the original map.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_apply"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L494-L504">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_apply"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_apply</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">^[</a><span class="fn">n</span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">]</a> <span class="fn">x</span></span></div></div><p>Function application for iteration.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_add"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L506-L514">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_add"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_add</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">m </span><span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> (<span class="fn">m</span> <a href=".././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">n</span>)</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">m</span>)</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span></span></div></div><p>Iteration adds exponents.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_isometry_on_pieces"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L516-L520">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_isometry_on_pieces"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_isometry_on_pieces</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">s</span> : <span class="fn"><a href=".././Mathlib/Data/Set/Defs.html#Set">Set</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hs</span> : <span class="fn">s</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x </span><span class="fn">y</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hx</span> : <span class="fn">x</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn">s</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hy</span> : <span class="fn">y</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn">s</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span>)</span> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">y</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">x</span> <span class="fn">y</span></span></div></div><p>Each iterate preserves the isometry property.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_toFun"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L522-L526">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_toFun"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_toFun</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">^[</a><span class="fn">n</span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">]</a></div></div><p>The underlying function of an iterate is the composition of the underlying functions.</p></div></div><div class="decl" id="PiecewiseIsometry.comp_dist_eq"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L532-L537">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.comp_dist_eq"><span class="name">PiecewiseIsometry</span>.<span class="name">comp_dist_eq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">x </span><span class="fn">y</span> : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">h</span> : <span class="fn">∃ <span class="fn">s</span> ∈ <span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.partition">partition</a></span>, <span class="fn">x</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn">s</span> <a href=".././Init/Prelude.html#And">∧</a> <span class="fn">y</span> <a href=".././Init/Prelude.html#Membership.mem">∈</a> <span class="fn">s</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">x</span>)</span> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <span class="fn">y</span>)</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Pseudo/Defs.html#Dist.dist">dist</a> <span class="fn">x</span> <span class="fn">y</span></span></div></div><p>Composition preserves distance on refined pieces.</p></div></div><div class="decl" id="PiecewiseIsometry.discontinuitySet_comp_subset"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L539-L675">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.discontinuitySet_comp_subset"><span class="name">PiecewiseIsometry</span>.<span class="name">discontinuitySet_comp_subset</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span> <a href=".././Init/Core.html#HasSubset.Subset">⊆</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span> <a href=".././Init/Core.html#Union.union">∪</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span> <a href=".././Init/Core.html#Union.union">∪</a> <span class="fn"><span class="fn">g</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span></div></div><p>The discontinuity set of a composition is contained in the union of discontinuity sets.</p></div></div><div class="decl" id="PiecewiseIsometry.discontinuitySet_iterate"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L681-L720">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.discontinuitySet_iterate"><span class="name">PiecewiseIsometry</span>.<span class="name">discontinuitySet_iterate</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span> <a href=".././Init/Core.html#HasSubset.Subset">⊆</a> <span class="fn">⋃ (<span class="fn">k</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>), <span class="fn">⋃ (_ : <span class="fn">k</span> <a href=".././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">n</span>), <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">^[</a><span class="fn">k</span><a href=".././Mathlib/Logic/Function/Iterate.html#Nat.iterate">]</a> <a href=".././Mathlib/Data/Set/Operations.html#Set.preimage">⁻¹'</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span></span></span></div></div><p>The discontinuity set of an iterate grows with iteration.</p></div></div><div class="decl" id="PiecewiseIsometry.iterate_finite_discontinuities"><div class="theorem"><div class="gh_link"><a href="https://github.com/e-vergo/TDCSG/blob/9d8bd66a9da14a131583df888464ed6d6c30793f/TDCSG/Composition.lean#L722-L758">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate_finite_discontinuities"><span class="name">PiecewiseIsometry</span>.<span class="name">iterate_finite_discontinuities</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href=".././foundational_types.html">Type</a> u}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/Topology/MetricSpace/Defs.html#MetricSpace">MetricSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/MeasurableSpace/Defs.html#MeasurableSpace">MeasurableSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href=".././Mathlib/MeasureTheory/Constructions/BorelSpace/Basic.html#BorelSpace">BorelSpace</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <span class="fn"><a href=".././TDCSG/Basic.html#PiecewiseIsometry">PiecewiseIsometry</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">n</span> : <a href=".././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hf</span> : <span class="fn"><span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span>.<a href=".././Mathlib/Data/Finite/Defs.html#Set.Finite">Finite</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hinj</span> : <span class="fn"><a href=".././Init/Data/Function.html#Function.Injective">Function.Injective</a> <span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.toFun">toFun</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href=".././TDCSG/Composition.html#PiecewiseIsometry.iterate">iterate</a></span> <span class="fn">n</span>)</span>.<a href=".././TDCSG/Basic.html#PiecewiseIsometry.discontinuitySet">discontinuitySet</a></span>.<a href=".././Mathlib/Data/Finite/Defs.html#Set.Finite">Finite</a></span></div></div><p>If f has finitely many discontinuities and is injective, so does each iterate.</p><p>Note: The injectivity hypothesis is necessary. Without it, the preimage of a finite set under f
can be infinite, even though f is injective on each partition piece. Injectivity is a natural
assumption for many piecewise isometries arising in dynamical systems.</p></div></div></main>
<nav class="nav"><iframe src=".././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>